<app-menu></app-menu>
<div class="container">
  <mat-toolbar class="toolbar-entrada-salida">
    <span>Registro de Entrada y Salida</span>
  </mat-toolbar>

  <!-- Campo de Búsqueda -->
  <div class="custom-toolbar">
    <input
      type="text"
      [(ngModel)]="codigoBusqueda"
      class="search-input"
      placeholder="Ingrese el código para buscar..."
    />
    <button (click)="buscarPorCodigo()" class="btn btn-left">CONSULTAR</button>
    <button (click)="toggleScanner()" class="btn btn-right">ESCANEAR</button>
  </div>

  <!-- Modal del Escáner -->
  <div *ngIf="isScannerVisible" class="modal">
    <div class="modal-content">
      <span class="close-btn" (click)="toggleScanner()">&times;</span>
      <div class="scanner-container">
        <zxing-scanner
          (scanSuccess)="onCodeScanned($event)" 
          [formats]="formats"
          [torch]="true">
        </zxing-scanner>
      </div>
    </div>
  </div>

  <!-- Mostrar Datos Obtenidos -->
  <div class="data-entry">
    <div class="form-row">
      <div class="form-labels">
        <label for="codigo">CÓDIGO:</label>
        <label for="identificacion">IDENTIFICACIÓN:</label>
        <label for="nombres">NOMBRES:</label>
        <label for="apellidos">APELLIDOS:</label>
        <label for="estado">ESTADO:</label>
      </div>
      <div class="form-fields">
        <input
          type="text"
          id="codigo"
          class="form-control"
          [value]="resultado?.codigo || ''"
          placeholder="CÓDIGO"
          disabled
        />
        <input
          type="text"
          id="identificacion"
          class="form-control"
          [value]="resultado?.identificacion || ''"
          placeholder="IDENTIFICACIÓN"
          disabled
        />
        <input
          type="text"
          id="nombres"
          class="form-control"
          [value]="resultado?.nombres || ''"
          placeholder="NOMBRES"
          disabled
        />
        <input
          type="text"
          id="apellidos"
          class="form-control"
          [value]="resultado?.apellidos || ''"
          placeholder="APELLIDOS"
          disabled
        />
        <input
          type="text"
          id="estado"
          class="form-control"
          [value]="resultado?.estado || ''"
          placeholder="ESTADO"
          disabled
        />
      </div>
      <!-- Foto -->
      <div class="photo-container">
        <div class="photo-box">
          <img
            *ngIf="resultado?.foto"
            [src]="resultado?.foto"  
            alt="Foto"
            class="qr-image"
          />
          <div *ngIf="!resultado?.foto" class="qr-placeholder">
            Sin Foto
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Botones Adicionales -->
  <div class="action-buttons">
    <button class="btn-permit" (click)="registrarAcceso()">PERMITIR</button>
    <button class="btn-deny">DENEGAR</button>
    <button class="btn-register">REGISTRAR INVITADO</button>
  </div>
</div>
